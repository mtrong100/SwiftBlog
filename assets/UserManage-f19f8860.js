import{u as v,r as i,e as N,j as e,_ as D,d as p,I as k,g as A,y as S,Q as U}from"./index-c9fa4626.js";import{T as C,I as E,a as M}from"./IconDelete-25111d15.js";import{S as u}from"./sweetalert2.all-4552996c.js";import{L as x}from"./LabelRole-1cccc16c.js";import{I as R}from"./IconView-b5051919.js";import{H as I}from"./Heading-803c943e.js";import{B}from"./Button-7ee070cf.js";import{u as a}from"./constants-c6ed1daf.js";import{b as L}from"./data-e78fadbb.js";import{A as O}from"./index.esm-20135b09.js";import{v as T}from"./v4-a960c1f4.js";const K=()=>{const{userInfo:s}=v(),[f,j]=i.useState([]),c=N(),[m,g]=i.useState(""),[d,b]=i.useState("all");i.useEffect(()=>{((s==null?void 0:s.role)===a.USER||(s==null?void 0:s.role)===a.MOD)&&c(`/manage/update-user?id=${s.uid}`)},[c,s==null?void 0:s.role,s.uid]);const w=t=>{switch(t){case a.ADMIN:return e.jsx(x,{type:"admin",children:"Admin"});case a.MOD:return e.jsx(x,{type:"mod",children:"Mod"});case a.USER:return e.jsx(x,{type:"user",children:"User"})}};i.useEffect(()=>{async function t(){const r=D(p,"users");k(r,l=>{let n=[];l.forEach(o=>{n.push({id:o.id,...o.data()})}),j(n)})}t()},[]);const h=f.filter(t=>t.username.toLowerCase().includes(m.toLowerCase())).filter(t=>d==="all"?!0:t.role===d),y=async t=>{const r=A(p,"users",t);s.role===a.ADMIN?u.fire({title:"Are you sure you want to delete this user?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then(async l=>{l.isConfirmed&&(await S(r),await u.fire("Deleted!","User has been deleted.","success"))}):U.error("only ADMIN can delete users !",{theme:"colored",autoClose:2e3,pauseOnHover:!1})};return e.jsxs(e.Fragment,{children:[e.jsx(I,{children:"users manage"}),e.jsxs("div",{className:"flex justify-between py-10",children:[e.jsx(B,{type:"button",kind:"secondary",className:"h-[55px]",path:"/manage/add-user",children:"Add new user"}),e.jsxs("div",{className:"flex items-center gap-10",children:[e.jsxs("select",{className:"py-2 w-[150px] text-lg border border-solid rounded bg-grayf3 text-text1 dark:text-white dark:bg-colorDarkRedux border-text3",value:d,onChange:t=>b(t.target.value),children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:a.ADMIN,children:"Admin"}),e.jsx("option",{value:a.MOD,children:"Mod"}),e.jsx("option",{value:a.USER,children:"User"})]}),e.jsxs("div",{className:"w-full flex items-center py-4 px-5 gap-3 max-w-[300px] border border-solid rounded-full border-text3 text-text1 dark:text-white",children:[e.jsx("span",{className:"text-2xl",children:e.jsx(O,{})}),e.jsx("input",{value:m,onChange:t=>g(t.target.value),type:"text",className:"w-full",placeholder:"Search user..."})]})]})]}),e.jsxs(C,{children:[e.jsx("thead",{children:e.jsx("tr",{children:L.map(t=>e.jsx("th",{children:t},T()))})}),e.jsx("tbody",{children:h.length>0&&h.map(t=>{var n,o;const r=(n=t==null?void 0:t.createdAt)!=null&&n.seconds?new Date(((o=t==null?void 0:t.createdAt)==null?void 0:o.seconds)*1e3):new Date,l=new Date(r).toLocaleDateString("vi-VI");return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-[60px] h-[60px] rounded-full",children:e.jsx("img",{src:t.avatar,alt:"",className:"rounded-full imgCover"})}),e.jsxs("div",{className:"flex-col flex-1 gap-3 whitespace-pre-wrap",children:[e.jsx("h3",{className:"font-semibold  hover:opacity-90 mb-1 max-w-[300px] capitalize  leading-relaxed",children:t.username}),e.jsx("time",{className:"text-sm font-bold text-text4",children:`Date: ${l}`})]})]})}),e.jsxs("td",{className:"flex flex-col gap-2 overflow-x-hidden",children:[e.jsxs("span",{className:"inline-block px-4 py-3 text-sm font-semibold text-center text-blue-500 bg-blue-500 rounded-lg w-fit hover:opacity-90 bg-opacity-10 dark:bg-colorDarkSaga ",children:[e.jsx("span",{className:" text-text1 dark:text-white",children:"Email:"}),e.jsx("span",{className:"ml-3",children:t.email})]}),e.jsxs("span",{className:"inline-block px-4 py-3 text-sm font-semibold text-center text-blue-500 bg-blue-500 rounded-lg bg-opacity-10 dark:bg-colorDarkSaga w-fit hover:opacity-90 ",children:[e.jsx("span",{className:" text-text1 dark:text-white",children:"Password:"}),e.jsx("span",{className:"ml-3",children:t.password})]})]}),e.jsx("td",{children:w(t.role)}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center text-gray-500 gap-x-3",children:[e.jsx(R,{}),e.jsx(E,{onClick:()=>c(`/manage/update-user?id=${t.id}`)}),e.jsx(M,{onClick:()=>y(t.id)})]})})]},t.id)})})]})]})};export{K as default};
