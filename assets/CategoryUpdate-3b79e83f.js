import{u as b,e as O,m as w,r as h,Q as i,j as e,g as p,d as f,h as A,n as S}from"./index-73878708.js";import{s as C}from"./slugify-5a8ede35.js";import{R as l}from"./Radio-fd09010a.js";import{c as V,a as F,u as H,F as x,L as y,I as U,b as k,o as I}from"./yup-cab4d3ba.js";import{H as L}from"./Heading-178aac5a.js";import{B as $}from"./Button-e76cae7b.js";import{u as j,c as r}from"./constants-c6ed1daf.js";const B=V({title:F().required("Please enter your title !")}),K=()=>{const{userInfo:s}=b(),v=O(),[P]=w(),c=P.get("id"),{control:o,handleSubmit:E,watch:N,reset:d,formState:{isValid:D,isSubmitting:u,errors:m}}=H({mode:"onchange",resolver:I(B),defaultValues:{}}),n=N("status");h.useEffect(()=>{async function t(){const a=p(f,"categories",c),g=await A(a);d(g&&g.data())}t()},[c,d]);const R=async t=>{if(D)try{const a=p(f,"categories",c);await S(a,{title:t.title,slug:C(t.title,{lower:!0}),status:t.status}),i.success("Add new category successfully !",{theme:"colored",autoClose:2e3,pauseOnHover:!1}),v("/manage/category")}catch{i.error("Failed to add new category !",{theme:"colored",autoClose:2e3,pauseOnHover:!1})}};return h.useEffect(()=>{var a;const t=Object.values(m);t.length>0&&i.error((a=t[0])==null?void 0:a.message,{theme:"colored",autoClose:2e3,pauseOnHover:!1})},[m]),e.jsxs("div",{children:[e.jsx(L,{children:"update category"}),e.jsxs("form",{className:"pt-14",onSubmit:E(R),children:[e.jsxs("div",{className:"grid grid-cols-2 gap-10 mb-10",children:[e.jsxs(x,{children:[e.jsx(y,{children:"Title ✒️"}),e.jsx(U,{control:o,placeholder:"Enter your title",name:"title"})]}),((s==null?void 0:s.role)===j.ADMIN||(s==null?void 0:s.role)===j.MOD)&&e.jsx(e.Fragment,{children:e.jsxs(x,{children:[e.jsx(y,{children:"Status"}),e.jsxs("div",{className:"flex items-center gap-x-5",children:[e.jsx(l,{name:"status",control:o,checked:n===r.APPROVED,value:r.APPROVED,children:"Approved"}),e.jsx(l,{name:"status",control:o,checked:n===r.PENDING,value:r.PENDING,children:"Pending"}),e.jsx(l,{name:"status",control:o,checked:n===r.UNAPPROVED,value:r.UNAPPROVED,children:"Unapproved"})]})]})})]}),e.jsx($,{type:"submit",kind:"secondary",className:`w-[200px] mx-auto h-[65px]  ${u?"opacity-50 pointer-events-none":""}`,children:u?e.jsx(k,{}):"update category"})]})]})};export{K as default};
