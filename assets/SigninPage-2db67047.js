import{e as w,u as b,r as n,Q as a,a as v,j as e,L as y,J as P,c as E}from"./index-5917582e.js";import{c as N,a as d,u as C,F as u,L as h,I as L,b as S,o as O}from"./yup-040dcb7d.js";import{A as F,I as A}from"./AuthPage-9768300e.js";import{B as H}from"./Button-5b97f855.js";import"./index.esm-c9114a4d.js";const T=N({email:d().email("Please enter valid email").required("Please enter your email"),password:d().min(8,"Your password must be 8 characters or greater").required("Please enter your password")}),q=()=>{const o=w(),{userInfo:s}=b(),l=n.useRef(!1),{control:i,handleSubmit:g,formState:{isValid:p,isSubmitting:c,errors:m}}=C({mode:"onchange",resolver:O(T)});n.useEffect(()=>{l.current&&(s!=null&&s.email)?(o("/"),a.info("You're already logged in!",{theme:"colored",autoClose:2e3,pauseOnHover:!1})):l.current=!0},[o,s==null?void 0:s.email]);const{theme:x}=v(),f=(()=>{switch(x){case"primary":return"border-colorOrange";case"secondary":return"border-colorPink";case"third":return"border-colorGreen";case"fourth":return"border-colorYellow";default:return""}})(),j=async r=>{if(p)try{await P(E,r.email,r.password),a.success("Login successfully!",{theme:"colored",autoClose:2e3,pauseOnHover:!1}),o("/")}catch{a.error("Something went wrong!",{theme:"colored",autoClose:2e3,pauseOnHover:!1})}};return n.useEffect(()=>{var t;const r=Object.values(m);r.length>0&&a.error((t=r[0])==null?void 0:t.message,{theme:"colored",autoClose:2e3,pauseOnHover:!1})},[m]),e.jsx("section",{className:"flex items-center justify-center h-screen signinBG",children:e.jsx("div",{className:"page-container",children:e.jsx("form",{onSubmit:g(j),className:`w-full ${f} border-2 max-w-[600px] p-10 shadow-lg glass-design rounded-lg mx-auto`,children:e.jsxs(F,{children:[e.jsxs(u,{children:[e.jsx(h,{htmlFor:"email",children:"Email"}),e.jsx(L,{name:"email",placeholder:"Enter your email...",control:i})]}),e.jsxs(u,{children:[e.jsx(h,{htmlFor:"password",children:"Password"}),e.jsx(A,{control:i}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold normal-case select-none",children:[e.jsx("p",{children:"Not have an account?"}),e.jsx(y,{to:"/register",className:"cursor-pointer text-colorPink",children:"Register"})]})]}),e.jsx(H,{type:"submit",className:`w-full h-[55px] md:h-[60px] font-semibold md:text-xl ${c?"opacity-50 pointer-events-none":""}`,children:c?e.jsx(S,{}):"Login"})]})})})})};export{q as default};
